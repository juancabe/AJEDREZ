ASxxxx Assembler V05.00  (Motorola 6809), page 1.
Hexidecimal [16-Bits]



                              1 ; Ensamblador Motorola 6809
                              2 
                              3 ; Programa de ejemplo: hola.asm
                              4 
                              5         	.area PROG (ABS)
                              6 
   0100                       7         	.org 0x100
                              8 
                              9 
                             10 
                             11 ; Texto coordenadas introducidas
                             12 
   0100 0A 4C 61 73 20 63    13 texto_coordenadas_introducidas:	.ascii "\nLas coordenadas introducidas son: \n"
        6F 6F 72 64 65 6E
        61 64 61 73 20 69
        6E 74 72 6F 64 75
        63 69 64 61 73 20
        73 6F 6E 3A 20 0A
   0124 00                   14 				.byte 0
                             15 
                             16 
                             17 ; Texto coordenadas iniciales
   0125 0A 49 6E 74 72 6F    18 texto_coordenadas_iniciales:	.ascii "\nIntroduzca las coordenadas iniciales de los jugadores.\n"
        64 75 7A 63 61 20
        6C 61 73 20 63 6F
        6F 72 64 65 6E 61
        64 61 73 20 69 6E
        69 63 69 61 6C 65
        73 20 64 65 20 6C
        6F 73 20 6A 75 67
        61 64 6F 72 65 73
        2E 0A
   015D 4C 61 73 20 63 6F    19 				.ascii "Las coordenadas son de 0 a 7, siendo 0 la esquina superior izquierda.\n"
        6F 72 64 65 6E 61
        64 61 73 20 73 6F
        6E 20 64 65 20 30
        20 61 20 37 2C 20
        73 69 65 6E 64 6F
        20 30 20 6C 61 20
        65 73 71 75 69 6E
        61 20 73 75 70 65
        72 69 6F 72 20 69
        7A 71 75 69 65 72
        64 61 2E 0A
   01A3 44 65 62 65 73 20    20 				.ascii "Debes introducir las dos coordenadas de cada jugador en el mismo texto.\n"
        69 6E 74 72 6F 64
        75 63 69 72 20 6C
        61 73 20 64 6F 73
        20 63 6F 6F 72 64
        65 6E 61 64 61 73
        20 64 65 20 63 61
        64 61 20 6A 75 67
        61 64 6F 72 20 65
        6E 20 65 6C 20 6D
        69 73 6D 6F 20 74
ASxxxx Assembler V05.00  (Motorola 6809), page 2.
Hexidecimal [16-Bits]



        65 78 74 6F 2E 0A
   01EB 50 6F 72 20 65 6A    21 				.ascii "Por ejemplo: '0 0 7 7¡, pero sin espacios entre medias '0077'\n"
        65 6D 70 6C 6F 3A
        20 27 30 20 30 20
        37 20 37 42 21 2C
        20 70 65 72 6F 20
        73 69 6E 20 65 73
        70 61 63 69 6F 73
        20 65 6E 74 72 65
        20 6D 65 64 69 61
        73 20 27 30 30 37
        37 27 0A
   022A 49 6E 74 72 6F 64    22 				.ascii "Introduzca las coordenadas: \n"
        75 7A 63 61 20 6C
        61 73 20 63 6F 6F
        72 64 65 6E 61 64
        61 73 3A 20 0A
   0247 00                   23 				.byte   0       ; 0 es CTRL-@: fin de cadena
                             24 
                             25 ; Variable char
   0248 00                   26 char:		.byte 0
                             27 
                             28 ;; Variables de coordenadas las coordenadas son de 0 a 7, siendo 0 la esquina superior izquierda
                             29 
                             30 ; Jugador 1
   0249 00                   31 x1:		.byte 0
   024A 00                   32 y1:		.byte 0
                             33 ; Jugador 2
   024B 00                   34 x2:		.byte 0
   024C 00                   35 y2:		.byte 0
   024D 00                   36 cero:		.byte 0
                             37 
                             38 
                             39 
                             40 ; Tablero de ajedrez
   024E 0A 20 2D 2D 2D 20    41 tablero:	.ascii "\n --- --- --- --- --- --- --- --- \n"
        2D 2D 2D 20 2D 2D
        2D 20 2D 2D 2D 20
        2D 2D 2D 20 2D 2D
        2D 20 2D 2D 2D 20
        2D 2D 2D 20 0A
   0271 7C 20 20 20 7C 20    42 		.ascii "|   |   |   |   |   |   |   |   |\n"
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 0A
   0293 20 2D 2D 2D 20 2D    43 		.ascii " --- --- --- --- --- --- --- --- \n"
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 0A
   02B5 7C 20 20 20 7C 20    44 		.ascii "|   |   |   |   |   |   |   |   |\n"
        20 20 7C 20 20 20
ASxxxx Assembler V05.00  (Motorola 6809), page 3.
Hexidecimal [16-Bits]



        7C 20 20 20 7C 20
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 0A
   02D7 20 2D 2D 2D 20 2D    45 		.ascii " --- --- --- --- --- --- --- --- \n"
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 0A
   02F9 7C 20 20 20 7C 20    46 		.ascii "|   |   |   |   |   |   |   |   |\n"
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 0A
   031B 20 2D 2D 2D 20 2D    47 		.ascii " --- --- --- --- --- --- --- --- \n"
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 0A
   033D 7C 20 20 20 7C 20    48 		.ascii "|   |   |   |   |   |   |   |   |\n"
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 0A
   035F 20 2D 2D 2D 20 2D    49 		.ascii " --- --- --- --- --- --- --- --- \n"
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 0A
   0381 7C 20 20 20 7C 20    50 		.ascii "|   |   |   |   |   |   |   |   |\n"
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 0A
   03A3 20 2D 2D 2D 20 2D    51 		.ascii " --- --- --- --- --- --- --- --- \n"
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 0A
   03C5 7C 20 20 20 7C 20    52 		.ascii "|   |   |   |   |   |   |   |   |\n"
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 0A
   03E7 20 2D 2D 2D 20 2D    53 		.ascii " --- --- --- --- --- --- --- --- \n"
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
ASxxxx Assembler V05.00  (Motorola 6809), page 4.
Hexidecimal [16-Bits]



        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 0A
   0409 7C 20 20 20 7C 20    54 		.ascii "|   |   |   |   |   |   |   |   |\n"
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 0A
   042B 20 2D 2D 2D 20 2D    55 		.ascii " --- --- --- --- --- --- --- --- \n"
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 0A
   044D 7C 20 20 20 7C 20    56 		.ascii "|   |   |   |   |   |   |   |   |\n"
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 20 20 20
        7C 20 20 20 7C 20
        20 20 7C 0A
   046F 20 2D 2D 2D 20 2D    57 		.ascii " --- --- --- --- --- --- --- --- \n"
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 2D 2D 2D
        20 2D 2D 2D 20 2D
        2D 2D 20 0A
   0491 00                   58         	.byte   0       ; 0 es CTRL-@: fin de cadena
                             59 ; Menú de opciones
                             60 ;	(1) Introducir las coordenadas iniciales.
                             61 ;	(2) Jugar.
                             62 ;	(S) Salir.
   0492 0A 0A 20 28 31 29    63 menu:		.ascii "\n\n (1) Introducir las coordenadas iniciales.\n"
        20 49 6E 74 72 6F
        64 75 63 69 72 20
        6C 61 73 20 63 6F
        6F 72 64 65 6E 61
        64 61 73 20 69 6E
        69 63 69 61 6C 65
        73 2E 0A
   04BF 20 28 32 29 20 4A    64 		.ascii " (2) Jugar.\n"
        75 67 61 72 2E 0A
   04CB 20 28 53 29 20 53    65 		.ascii " (S) Salir.\n\n"
        61 6C 69 72 2E 0A
        0A
   04D8 00                   66 		.byte   0       ; 0 es CTRL-@: fin de cadena
                             67 
                             68 
                             69 
                             70         	.globl programa
   04D9                      71 programa:
   04D9 8E 04 92      [ 3]   72 		ldx #menu
   04DC BD 00 5F      [ 8]   73 		jsr imprime_cadena ; Imprime el menú
   04DF BD 00 6D      [ 8]   74 		jsr consigue_caracter_char ; Consigue el caracter introducido y lo guarda en char
   04E2 B6 02 48      [ 5]   75 		lda char
ASxxxx Assembler V05.00  (Motorola 6809), page 5.
Hexidecimal [16-Bits]



   04E5 81 31         [ 2]   76 		cmpa #49 ; Código ASCII de 1
   04E7 BD 00 00      [ 8]   77 		jsr coordenadas_iniciales ; Si se ha introducido 1, se introducen las coordenadas iniciales
                             78 
                             79 		;; Acabar el programa
   04EA 4F            [ 2]   80 		clra
   04EB B7 FF 01      [ 5]   81         	sta 0xFF01
                             82 
   FFFE                      83         	.org 0xFFFE     ; Vector de RESET
   FFFE 04 D9                84         	.word programa
                             85 
   0000                      86 coordenadas_iniciales:
   0000 34 02         [ 6]   87 		pshs a
   0002 34 10         [ 6]   88 		pshs x
   0004 8E 01 25      [ 3]   89 		ldx #texto_coordenadas_iniciales
   0007 BD 00 5F      [ 8]   90 		jsr imprime_cadena ; Imprime el texto de las coordenadas iniciales
                             91 
   000A BD 00 6D      [ 8]   92 		jsr consigue_caracter_char ; Consigue el caracter introducido y lo guarda en char
   000D B6 02 48      [ 5]   93 		lda char
                             94 		; Comprobar que el caracter introducido es un número
   0010 81 30         [ 2]   95 		cmpa #48
   0012 25 EC         [ 3]   96 		blo coordenadas_iniciales
   0014 81 39         [ 2]   97 		cmpa #57
   0016 22 E8         [ 3]   98 		bhi coordenadas_iniciales
                             99 		; Guardar el número en x1
   0018 B7 02 49      [ 5]  100 		sta x1
                            101 
                            102 
                            103 		; Consigue el siguiente caracter
   001B BD 00 6D      [ 8]  104 		jsr consigue_caracter_char
   001E B6 02 48      [ 5]  105 		lda char
                            106 		; Comprobar que el caracter introducido es un número
   0021 81 30         [ 2]  107 		cmpa #48
   0023 25 DB         [ 3]  108 		blo coordenadas_iniciales
   0025 81 39         [ 2]  109 		cmpa #57
   0027 22 D7         [ 3]  110 		bhi coordenadas_iniciales
                            111 		; Guardar el número en y1
   0029 B7 02 4A      [ 5]  112 		sta y1
                            113 
                            114 
                            115 		; Consigue el siguiente caracter
   002C BD 00 6D      [ 8]  116 		jsr consigue_caracter_char
   002F B6 02 48      [ 5]  117 		lda char
                            118 		; Comprobar que el caracter introducido es un número
   0032 81 30         [ 2]  119 		cmpa #48
   0034 25 CA         [ 3]  120 		blo coordenadas_iniciales
   0036 81 39         [ 2]  121 		cmpa #57
   0038 22 C6         [ 3]  122 		bhi coordenadas_iniciales
                            123 		; Guardar el número en x2
   003A B7 02 4B      [ 5]  124 		sta x2
                            125 
                            126 
                            127 		; Consigue el siguiente caracter
   003D BD 00 6D      [ 8]  128 		jsr consigue_caracter_char
   0040 B6 02 48      [ 5]  129 		lda char
                            130 		; Comprobar que el caracter introducido es un número
ASxxxx Assembler V05.00  (Motorola 6809), page 6.
Hexidecimal [16-Bits]



   0043 81 30         [ 2]  131 		cmpa #48
   0045 25 B9         [ 3]  132 		blo coordenadas_iniciales
   0047 81 39         [ 2]  133 		cmpa #57
   0049 22 B5         [ 3]  134 		bhi coordenadas_iniciales
                            135 		; Guardar el número en y2
   004B B7 02 4C      [ 5]  136 		sta y2
                            137 
                            138 
                            139 		; Mostrar en pantalla las coordenadas introducidas
   004E 8E 01 00      [ 3]  140 		ldx #texto_coordenadas_introducidas
   0051 BD 00 5F      [ 8]  141 		jsr imprime_cadena
   0054 8E 02 49      [ 3]  142 		ldx #x1
   0057 BD 00 5F      [ 8]  143 		jsr imprime_cadena
   005A 35 10         [ 6]  144 		puls x
   005C 35 02         [ 6]  145 		puls a
   005E 39            [ 5]  146 		rts
                            147 
                            148 
                            149 
                            150 
                            151 
                            152 
                            153 
                            154 
                            155 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            156 ; imprime_cadena                                                   ;
                            157 ;     saca por la pantalla la cadena acabada en '\0 apuntada por X ;
                            158 ;                                                                  ;
                            159 ;   Entrada: X-direcciOn de comienzo de la cadena                  ;
                            160 ;   Salida:  ninguna                                               ;
                            161 ;   Registros afectados: X, CC.                                    ;
                            162 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   005F                     163 imprime_cadena:
   005F 34 02         [ 6]  164         pshs a
   0061 A6 80         [ 6]  165 sgte:   lda ,x+
   0063 27 05         [ 3]  166         beq ret_imprime_cadena
   0065 B7 FF 00      [ 5]  167         sta 0xFF00
   0068 20 F7         [ 3]  168         bra sgte
   006A                     169 ret_imprime_cadena:
   006A 35 02         [ 6]  170         puls a
   006C 39            [ 5]  171         rts
                            172 
                            173 
                            174 
                            175 
                            176 
                            177 
                            178 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            179 ; consigue_caracter_char                                           ;
                            180 ;     guarda en la variable char el caracter introducido por el    ;
                            181 ;     teclado.                                                     ;
                            182 ;                                                                  ;
                            183 ;   Entrada: ninguna                                               ;
                            184 ;   Salida:  char                                                  ;
                            185 ;   Registros afectados: X, CC.                                    ;
ASxxxx Assembler V05.00  (Motorola 6809), page 7.
Hexidecimal [16-Bits]



                            186 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            187 
   006D                     188 consigue_caracter_char:
   006D 34 02         [ 6]  189 	pshs a
   006F B6 FF 02      [ 5]  190 	lda 0xFF02
   0072 B7 02 48      [ 5]  191 	sta char
   0075 35 02         [ 6]  192 	puls a
   0077 39            [ 5]  193 	rts
                            194 
                            195 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            196 ; coordenadas_iniciales				  	           ;
                            197 ;     guarda en las variables x1, y1, x2, y2 las coordenadas       ;
                            198 ;     introducidas por el teclado.                                 ;
                            199 ;     Mostrar en pantalla un texto que indique que se deben        ;
                            200 ;     introducir las coordenadas y como introducirlas.             ;
                            201 ;                                                                  ;
                            202 ;   Entrada: ninguna                                               ;
                            203 ;   Salida:  x1, y1, x2, y2                                        ;
                            204 ;   Registros afectados: X, CC.                                    ;
                            205 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            206 
ASxxxx Assembler V05.00  (Motorola 6809), page 8.
Hexidecimal [16-Bits]

Symbol Table

    .__.$$$.       =   2710 L   |     .__.ABS.       =   0000 G
    .__.CPU.       =   0000 L   |     .__.H$L.       =   0001 L
  2 cero               024D R   |   2 char               0248 R
  2 consigue_carac     006D R   |   2 coordenadas_in     0000 R
  2 imprime_cadena     005F R   |   2 menu               0492 R
  2 programa           04D9 GR  |   2 ret_imprime_ca     006A R
  2 sgte               0061 R   |   2 tablero            024E R
  2 texto_coordena     0125 R   |   2 texto_coordena     0100 R
  2 x1                 0249 R   |   2 x2                 024B R
  2 y1                 024A R   |   2 y2                 024C R

ASxxxx Assembler V05.00  (Motorola 6809), page 9.
Hexidecimal [16-Bits]

Area Table

[_CSEG]
   0 _CODE            size    0   flags C080
   2 PROG             size   78   flags  908
[_DSEG]
   1 _DATA            size    0   flags C0C0

